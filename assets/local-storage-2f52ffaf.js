var p=(a,e,t)=>{if(!e.has(a))throw TypeError("Cannot "+t)};var l=(a,e,t)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,t)};var i=(a,e,t)=>(p(a,e,"access private method"),t);import{a as c}from"./vendor-c5b37fd0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();class m{constructor(){this.BASE_URL="https://food-boutique.b.goit.study/api"}async getProductsByName(e,t,s=1,r=6){const o=new URLSearchParams({keyword:e,category:t,page:s,limit:r});try{return(await c.get(`${this.BASE_URL}/products?${o}`)).data}catch{throw console.error("Помилка при отриманні продуктів:",error.message),error}}async getAllProducts(e=1,t=6){try{return(await c.get(`${this.BASE_URL}/products`,{params:{page:e,limit:t}})).data}catch(s){throw console.error("Помилка при отриманні всіх продуктів:",s.message),s}}async getPopularProducts(e){try{const t={limit:e};return(await c.get(`${this.BASE_URL}/products/popular`,{params:t})).data}catch(t){throw console.error("Помилка при отриманні популярних продуктів:",t.message),t}}async getDiscountedProducts(){try{return(await c.get(`${this.BASE_URL}/products/discount`)).data}catch(e){throw console.error("Помилка при отриманні продуктів зі знижкою:",e.message),e}}async getProductsByCategory(){try{return(await c.get(`${this.BASE_URL}/products/categories`)).data}catch(e){throw console.error("Помилка при отриманні продуктів за категорією:",e.message),e}}async getProductsInCategories(e,t=1,s=6){try{const r=new URLSearchParams({category:e,page:t,limit:s});return(await c.get(`${this.BASE_URL}/products?${r}`)).data}catch(r){throw console.error("Помилка при отриманні продуктів за категорією(при оновленні сторінки): ",r.message),r}}async getProductById(e){try{return(await c.get(`${this.BASE_URL}/products/${e}`)).data}catch(t){throw console.error("Помилка при отриманні продукта за айді:",t.message),t}}async createNewOrder(e){try{return(await c.post(`${this.BASE_URL}/orders`,e)).data}catch(t){throw console.error("Помилка при створенні нового замовлення:",t.message),t}}async createSubscription(e){try{return(await c.post(`${this.BASE_URL}/subscriptions`,{email:e})).data}catch(t){throw console.error("Помилка при створенні підписки:",t.message),t}}}var n,u;class y{constructor(e){l(this,n);this.storageBasketName=e,this.initStorage()}initStorage(){this.getAllProducts()||i(this,n,u).call(this,[])}getAllProducts(){return JSON.parse(localStorage.getItem(this.storageBasketName))}addProduct(e){if(!e)return;const t=this.getAllProducts(),s=t.find(r=>r._id===e._id);s?s.amount+=1:(e.amount=1,t.push(e)),i(this,n,u).call(this,t)}removeProductById(e){const t=this.getAllProducts(),s=t.find(r=>r._id===e);if(s)s.amount>1?s.amount-=1:t.filter(r=>r._id===s._id);else return;i(this,n,u).call(this,t)}removeAllProductsById(e){i(this,n,u).call(this,this.getAllProducts().filter(t=>t._id!==e))}removeAllProducts(){i(this,n,u).call(this,[])}removeProduct(e){const s=this.getAllProducts().filter(r=>r._id!==e);i(this,n,u).call(this,s)}}n=new WeakSet,u=function(e){localStorage.setItem(this.storageBasketName,JSON.stringify(e))};export{m as A,y as S};
//# sourceMappingURL=local-storage-2f52ffaf.js.map
