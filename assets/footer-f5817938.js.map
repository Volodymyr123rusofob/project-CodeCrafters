{"version":3,"file":"footer-f5817938.js","sources":["../../src/js/requests.js","../../src/js/alert.js","../../src/js/local-storage.js","../../src/img/symbol-defs.svg","../../src/js/local-storage-interface.js","../../src/js/header.js","../../src/js/footer.js"],"sourcesContent":["import axios from 'axios';\n\nclass ApiService {\n  constructor() {\n    this.BASE_URL = 'https://food-boutique.b.goit.study/api';\n  }\n\n  async getProductsByName(name, categories, page = 1, limit = 9) {\n    const params = new URLSearchParams({\n      keyword: name,\n      category: categories,\n      page,\n      limit,\n    });\n    try {\n      const resp = await axios.get(`${this.BASE_URL}/products?${params}`);\n      return resp.data;\n    } catch {\n      console.error('Помилка при отриманні продуктів:', error.message);\n      throw error;\n    }\n  }\n\n  async getAllProducts(page = 1, limit = 9) {\n    try {\n      const response = await axios.get(`${this.BASE_URL}/products`, {\n        params: {\n          page,\n          limit,\n        },\n      });\n\n      return response.data;\n    } catch (error) {\n      console.error('Помилка при отриманні всіх продуктів:', error.message);\n      throw error;\n    }\n  }\n\n  async getPopularProducts(limit) {\n    try {\n      const params = {\n        limit,\n      };\n\n      const response = await axios.get(`${this.BASE_URL}/products/popular`, {\n        params,\n      });\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        'Помилка при отриманні популярних продуктів:',\n        error.message\n      );\n      throw error;\n    }\n  }\n\n  async getDiscountedProducts() {\n    try {\n      const response = await axios.get(`${this.BASE_URL}/products/discount`);\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        'Помилка при отриманні продуктів зі знижкою:',\n        error.message\n      );\n      throw error;\n    }\n  }\n\n  async getProductsByCategory() {\n    try {\n      const response = await axios.get(`${this.BASE_URL}/products/categories`);\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        'Помилка при отриманні продуктів за категорією:',\n        error.message\n      );\n      throw error;\n    }\n  }\n\n  // add for Viacheslav\n  async getProductsInCategories(categories, page = 1, limit = 6) {\n    try {\n      const params = new URLSearchParams({\n        category: categories,\n        page,\n        limit,\n      });\n      const response = await axios.get(`${this.BASE_URL}/products?${params}`);\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        'Помилка при отриманні продуктів за категорією(при оновленні сторінки): ',\n        error.message\n      );\n      throw error;\n    }\n  }\n\n  async getProductById(productId) {\n    try {\n      const response = await axios.get(\n        `${this.BASE_URL}/products/${productId}`\n      );\n\n      return response.data;\n    } catch (error) {\n      console.error('Помилка при отриманні продукта за айді:', error.message);\n      throw error;\n    }\n  }\n\n  async createNewOrder(orderData) {\n    try {\n      const response = await axios.post(`${this.BASE_URL}/orders`, orderData);\n\n      return response.data;\n    } catch (error) {\n      console.error('Помилка при створенні нового замовлення:', error.message);\n      throw error;\n    }\n  }\n\n  async  createSubscription(email) {\n   const response = await axios.post(this.BASE_URL+'/subscription', email, {\n     headers: {\n       'Content-Type': 'application/json',\n     },\n   });\n \n   return response;\n }\n  }\n\n\nexport default ApiService;\n","import Swal from 'sweetalert2';\n\nexport default function alertPopUp(message = 'The product has been added to the basket!', icon= \"success\") {\n    Swal.fire({\n          title: \"\",\n          text: message,\n          icon: icon,\n          confirmButtonColor: \"#6d8434\",\n        });\n }","import alertPopUp from './alert';\n\nexport class ShopStorage {\n  constructor(storageBasketName) {\n    this.storageBasketName = storageBasketName;\n    this.initStorage();\n  }\n\n  initStorage() {\n    if (this.getAllProducts()) {\n      return;\n    }\n    this.#writeToLocalStorage([]);\n  }\n\n  getAllProducts() {\n    return JSON.parse(localStorage.getItem(this.storageBasketName));\n  }\n\n  addProduct(newProduct) {\n    if (!newProduct) {\n      return;\n    }\n    const products = this.getAllProducts();\n    const searchProduct = products.find(item => item._id === newProduct._id);\n    if (!searchProduct) {\n      newProduct.amount = 1;\n      products.push(newProduct);\n    } else {\n      // searchProduct.amount += 1;\n      alertPopUp(message = 'This product has already been added to the cart!',\n      icon = 'warning');\n    }\n    this.#writeToLocalStorage(products);\n  }\n\n  removeProductById(productId) {\n    const products = this.getAllProducts();\n    const searchProduct = products.find(item => item._id === productId);\n    if (!searchProduct) {\n      return;\n    } else if (searchProduct.amount > 1) {\n      searchProduct.amount -= 1;\n    } else {\n      products.filter(elem => elem._id === searchProduct._id);\n    }\n    this.#writeToLocalStorage(products);\n  }\n\n  removeAllProductsById(productId) {\n    this.#writeToLocalStorage(\n      this.getAllProducts().filter(elem => elem._id !== productId)\n    );\n  }\n\n  removeAllProducts() {\n    this.#writeToLocalStorage([]);\n  }\n\n  #writeToLocalStorage(productArray) {\n    localStorage.setItem(this.storageBasketName, JSON.stringify(productArray));\n  }\n\n  //додатковий метод для видалення одного продукту (для корректної роботи кошика)\n  removeProduct(productId) {\n    const products = this.getAllProducts();\n    const updatedProducts = products.filter(product => product._id !== productId);\n    this.#writeToLocalStorage(updatedProducts);\n  }\n}\n","export default \"__VITE_ASSET__f3017a39__\"","import { ShopStorage } from './local-storage';\n\nconst SHOP_STORAGE = 'productsBasket';\nconst productsBasket = new ShopStorage(SHOP_STORAGE);\n\nexport  function getAllProducts(){\n  return productsBasket.getAllProducts();\n}\n\nexport  function addProductOnClickButton(productObj){\n  productsBasket.addProduct(productObj)\n}\n\nexport  function removeProductOnClickButton(productObj){\n  productsBasket.removeAllProductsById(productObj)\n}","// const LS_KEY = 'productsBasket';\n\n// const loadFromLS = key => {\n//   try {\n//     const serializedState = localStorage.getItem(key);\n//     return serializedState === null ? undefined : JSON.parse(serializedState);\n//   } catch (error) {\n//     console.error('Get state error: ', error.message);\n//   }\n// };\n\n// export const updateCartCounter = () => {\n//   const cartCounter = document.querySelector('#cart-counter');\n\n//   const items = loadFromLS(LS_KEY) ?? [];\n//   cartCounter.textContent = `(${items.length})`;\n// };\n\n// updateCartCounter();\nimport { getAllProducts } from './local-storage-interface.js';\nexport const updateCartCounter = () => {\n  const cartCounter = document.querySelector('#cart-counter-header');\n  const items = getAllProducts();\n  cartCounter.textContent = `(${items.length})`;\n};\nupdateCartCounter();\n\n","// import alertPopUp from './alert';\n// import Notiflix from 'notiflix';\n// import ApiService from \"./requests\";\n\n// const apiService = new ApiService(); // Создаем экземпляр класса ApiService\n\n// const formSubmit = document.getElementById(\"subscriptionForm\");\n// const emailInput = document.querySelector(\".footer-form-input\");\n\n// function isValidEmail(email) {\n//   const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n//   return emailRegex.test(email);\n// }\n\n// async function handleSubmit(event) {\n//   event.preventDefault();\n\n//   const email = emailInput.value;\n\n//   if (isValidEmail(email)) {\n//     try {\n//       // Вызываем метод createSubscription через экземпляр ApiService\n//       const response = await apiService.createSubscription(email);\n//       if (response.conflict) {\n//         // Выводим сообщение об email конфликте\n//         alertPopUp('This email address has already been entered. You have already subscribed to our new products. Watch for offers at the mailing address.');\n//       } else {\n//         // Выводим уведомление об успешной подписке\n//         console.log('Success:', response);\n//         alertPopUp('Subscription completed successfully');\n//       }\n//     } catch (error) {\n//       console.error('Error:', error);\n//       Notiflix.Notify.failure('Error during subscription');\n//     }\n//   } else {\n//     Notiflix.Notify.warning('Please enter a valid email address.');\n//     }\n//     event.target.reset();\n// }\n\n// formSubmit.addEventListener(\"submit\", handleSubmit);\n\nimport ApiService from \"./requests\";\n import alertPopUp from './alert';\n \n \n const apiService = new ApiService(); // Создаем экземпляр класса ApiService\n \n const formSubmit = document.getElementById(\"subscriptionForm\");\n const emailInput = document.querySelector(\".footer-form-input\");\nformSubmit.addEventListener(\"submit\", handleSubmit);\n \n async function handleSubmit(event) {\n   event.preventDefault();\n   \n   const email = event.currentTarget.elements[\"email\"]\n   const value = emailInput.value;\n \n \n   try {\n     const response = await apiService.createSubscription({ email: value });\n     email.value = '';\n \n     let successMessageToApi = 'Successfully subscribed!';\n     if (response && response.data && response.data.message) {\n       successMessageToApi = response.data.message;\n     } \n     alertPopUp(successMessageToApi,'success')   // тут алерт окно\n  \n   } catch(error){\n     console.log('Error:', error);\n \n     let errorMessage = 'This email address has already been entered.You have already subscribed to our new products. Watch for offers at the mailing address.';\n \n     if (error.response && error.response.data && error.response.data.message) {\n       errorMessage = error.response.data.message;\n     }\n     \n     alertPopUp(errorMessage,'warning')    // тут алерт окно\n   }\n   event.target.reset();\n }"],"names":["ApiService","name","categories","page","limit","params","axios","error","productId","orderData","email","alertPopUp","message","icon","Swal","ShopStorage","storageBasketName","__privateAdd","_writeToLocalStorage","__privateMethod","writeToLocalStorage_fn","newProduct","products","item","searchProduct","elem","updatedProducts","product","productArray","icons","SHOP_STORAGE","productsBasket","getAllProducts","addProductOnClickButton","productObj","removeProductOnClickButton","updateCartCounter","cartCounter","items","apiService","formSubmit","emailInput","handleSubmit","event","value","response","successMessageToApi","errorMessage"],"mappings":"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"}