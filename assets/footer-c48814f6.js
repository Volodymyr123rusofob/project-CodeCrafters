var h=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var g=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)};var i=(o,e,t)=>(h(o,e,"access private method"),t);import{a as c,S as m}from"./vendor-ab16d78c.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();class f{constructor(){this.BASE_URL="https://food-boutique.b.goit.study/api"}async getProductsByName(e,t,s=1,r=9){const a=new URLSearchParams({keyword:e,category:t,page:s,limit:r});try{return(await c.get(`${this.BASE_URL}/products?${a}`)).data}catch{throw console.error("Помилка при отриманні продуктів:",error.message),error}}async getAllProducts(e=1,t=9){try{return(await c.get(`${this.BASE_URL}/products`,{params:{page:e,limit:t}})).data}catch(s){throw console.error("Помилка при отриманні всіх продуктів:",s.message),s}}async getPopularProducts(e){try{const t={limit:e};return(await c.get(`${this.BASE_URL}/products/popular`,{params:t})).data}catch(t){throw console.error("Помилка при отриманні популярних продуктів:",t.message),t}}async getDiscountedProducts(){try{return(await c.get(`${this.BASE_URL}/products/discount`)).data}catch(e){throw console.error("Помилка при отриманні продуктів зі знижкою:",e.message),e}}async getProductsByCategory(){try{return(await c.get(`${this.BASE_URL}/products/categories`)).data}catch(e){throw console.error("Помилка при отриманні продуктів за категорією:",e.message),e}}async getProductsInCategories(e,t=1,s=6){try{const r=new URLSearchParams({category:e,page:t,limit:s});return(await c.get(`${this.BASE_URL}/products?${r}`)).data}catch(r){throw console.error("Помилка при отриманні продуктів за категорією(при оновленні сторінки): ",r.message),r}}async getProductById(e){try{return(await c.get(`${this.BASE_URL}/products/${e}`)).data}catch(t){throw console.error("Помилка при отриманні продукта за айді:",t.message),t}}async createNewOrder(e){try{return(await c.post(`${this.BASE_URL}/orders`,e)).data}catch(t){throw console.error("Помилка при створенні нового замовлення:",t.message),t}}async createSubscription(e){return await c.post(this.BASE_URL+"/subscription",e,{headers:{"Content-Type":"application/json"}})}}function l(o="The product has been added to the basket!",e="success"){m.fire({title:"",text:o,icon:e,confirmButtonColor:"#6d8434"})}var n,d;class y{constructor(e){g(this,n);this.storageBasketName=e,this.initStorage()}initStorage(){this.getAllProducts()||i(this,n,d).call(this,[])}getAllProducts(){return JSON.parse(localStorage.getItem(this.storageBasketName))}addProduct(e){if(!e)return;const t=this.getAllProducts();t.find(r=>r._id===e._id)?l(message="This product has already been added to the cart!",icon="warning"):(e.amount=1,t.push(e)),i(this,n,d).call(this,t)}removeProductById(e){const t=this.getAllProducts(),s=t.find(r=>r._id===e);if(s)s.amount>1?s.amount-=1:t.filter(r=>r._id===s._id);else return;i(this,n,d).call(this,t)}removeAllProductsById(e){i(this,n,d).call(this,this.getAllProducts().filter(t=>t._id!==e))}removeAllProducts(){i(this,n,d).call(this,[])}removeProduct(e){const s=this.getAllProducts().filter(r=>r._id!==e);i(this,n,d).call(this,s)}}n=new WeakSet,d=function(e){localStorage.setItem(this.storageBasketName,JSON.stringify(e))};const E="/project-CodeCrafters/assets/symbol-defs-e77d3d30.svg",S="productsBasket",p=new y(S);function P(){return p.getAllProducts()}function R(o){p.addProduct(o)}function U(o){p.removeAllProductsById(o)}const w=()=>{const o=document.querySelector("#cart-counter-header"),e=P();o.textContent=`(${e.length})`};w();const A=new f,B=document.getElementById("subscriptionForm"),b=document.querySelector(".footer-form-input");B.addEventListener("submit",L);async function L(o){o.preventDefault();const e=o.currentTarget.elements.email,t=b.value;try{const s=await A.createSubscription({email:t});e.value="";let r="Successfully subscribed!";s&&s.data&&s.data.message&&(r=s.data.message),l(r,"success")}catch(s){console.log("Error:",s);let r="This email address has already been entered.You have already subscribed to our new products. Watch for offers at the mailing address.";s.response&&s.response.data&&s.response.data.message&&(r=s.response.data.message),l(r,"warning")}o.target.reset()}export{f as A,y as S,R as a,l as b,P as g,E as i,U as r,w as u};
//# sourceMappingURL=footer-c48814f6.js.map
