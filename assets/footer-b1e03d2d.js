var h=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var g=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)};var d=(o,e,t)=>(h(o,e,"access private method"),t);import{S as m,a as n}from"./vendor-cc119595.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function p(o="The product has been added to the basket!",e="success"){m.fire({title:"",text:o,icon:e,confirmButtonColor:"#6d8434"})}class f{constructor(){this.BASE_URL="https://food-boutique.b.goit.study/api"}hidePagination(){document.getElementById("pagination").classList.add("hiden")}showPagination(){document.getElementById("pagination").classList.remove("hidden")}async getProductsByName(e,t,s=1,r=9){const a=new URLSearchParams({keyword:e,category:t,page:s,limit:r});this.showPagination();try{const i=await n.get(`${this.BASE_URL}/products?${a}`);return i.data.page>i.data.totalPages&&this.hidePagination(),i.data}catch{throw console.error("Помилка при отриманні продуктів:",error.message),error}}async getAllProducts(e=1,t=9){this.showPagination();try{const s=await n.get(`${this.BASE_URL}/products`,{params:{page:e,limit:t}});return s.data.page>s.data.totalPages&&this.hidePagination(),s.data}catch(s){throw console.error("Помилка при отриманні всіх продуктів:",s.message),s}}async getPopularProducts(e){try{const t={limit:e};return(await n.get(`${this.BASE_URL}/products/popular`,{params:t})).data}catch(t){throw console.error("Помилка при отриманні популярних продуктів:",t.message),t}}async getDiscountedProducts(){try{return(await n.get(`${this.BASE_URL}/products/discount`)).data}catch(e){throw console.error("Помилка при отриманні продуктів зі знижкою:",e.message),e}}async getProductsByCategory(){try{return(await n.get(`${this.BASE_URL}/products/categories`)).data}catch(e){throw console.error("Помилка при отриманні продуктів за категорією:",e.message),e}}async getProductsInCategories(e,t=1,s=6){try{const r=new URLSearchParams({category:e,page:t,limit:s});return(await n.get(`${this.BASE_URL}/products?${r}`)).data}catch(r){throw console.error("Помилка при отриманні продуктів за категорією(при оновленні сторінки): ",r.message),r}}async getProductById(e){try{return(await n.get(`${this.BASE_URL}/products/${e}`)).data}catch(t){throw console.error("Помилка при отриманні продукта за айді:",t.message),t}}async createNewOrder(e){try{return(await n.post(`${this.BASE_URL}/orders`,e)).data}catch(t){throw console.error("Помилка при створенні нового замовлення:",t.message),t}}async createSubscription(e){return await n.post(this.BASE_URL+"/subscription",e,{headers:{"Content-Type":"application/json"}})}}var c,u;class y{constructor(e){g(this,c);this.storageBasketName=e,this.initStorage()}initStorage(){this.getAllProducts()||d(this,c,u).call(this,[])}getAllProducts(){return JSON.parse(localStorage.getItem(this.storageBasketName))}addProduct(e){if(!e)return;const t=this.getAllProducts();if(!t.find(r=>r._id===e._id))e.amount=1,t.push(e);else return;d(this,c,u).call(this,t)}removeProductById(e){const t=this.getAllProducts(),s=t.find(r=>r._id===e);if(s)s.amount>1?s.amount-=1:t.filter(r=>r._id===s._id);else return;d(this,c,u).call(this,t)}removeAllProductsById(e){d(this,c,u).call(this,this.getAllProducts().filter(t=>t._id!==e))}removeAllProducts(){d(this,c,u).call(this,[])}removeProduct(e){const s=this.getAllProducts().filter(r=>r._id!==e);d(this,c,u).call(this,s)}}c=new WeakSet,u=function(e){localStorage.setItem(this.storageBasketName,JSON.stringify(e))};const v="/project-CodeCrafters/assets/symbol-defs-e77d3d30.svg",P="productsBasket",l=new y(P);function S(){return l.getAllProducts()}function R(o){l.addProduct(o)}function U(o){l.removeAllProductsById(o)}const w=()=>{const o=document.querySelector("#cart-counter-header"),e=S();console.log(e.length),o.textContent=`(${e.length})`};w();const A=new f,B=document.getElementById("subscriptionForm"),b=document.querySelector(".footer-form-input");B.addEventListener("submit",L);async function L(o){o.preventDefault();const e=o.currentTarget.elements.email,t=b.value;try{const s=await A.createSubscription({email:t});e.value="";let r="Successfully subscribed!";s&&s.data&&s.data.message&&(r=s.data.message),p(r,"success")}catch(s){console.log("Error:",s);let r="This email address has already been entered.You have already subscribed to our new products. Watch for offers at the mailing address.";s.response&&s.response.data&&s.response.data.message&&(r=s.response.data.message),p(r,"warning")}o.target.reset()}export{f as A,y as S,p as a,R as b,S as g,v as i,U as r,w as u};
//# sourceMappingURL=footer-b1e03d2d.js.map
