var g=(o,t,e)=>{if(!t.has(o))throw TypeError("Cannot "+e)};var p=(o,t,e)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,e)};var i=(o,t,e)=>(g(o,t,"access private method"),e);import{a}from"./vendor-ab16d78c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=e(r);fetch(r.href,c)}})();class A{constructor(){this.BASE_URL="https://food-boutique.b.goit.study/api"}async getProductsByName(t,e,s=1,r=6){const c=new URLSearchParams({keyword:t,category:e,page:s,limit:r});try{return(await a.get(`${this.BASE_URL}/products?${c}`)).data}catch{throw console.error("Помилка при отриманні продуктів:",error.message),error}}async getAllProducts(t=1,e=6){try{return(await a.get(`${this.BASE_URL}/products`,{params:{page:t,limit:e}})).data}catch(s){throw console.error("Помилка при отриманні всіх продуктів:",s.message),s}}async getPopularProducts(t){try{const e={limit:t};return(await a.get(`${this.BASE_URL}/products/popular`,{params:e})).data}catch(e){throw console.error("Помилка при отриманні популярних продуктів:",e.message),e}}async getDiscountedProducts(){try{return(await a.get(`${this.BASE_URL}/products/discount`)).data}catch(t){throw console.error("Помилка при отриманні продуктів зі знижкою:",t.message),t}}async getProductsByCategory(){try{return(await a.get(`${this.BASE_URL}/products/categories`)).data}catch(t){throw console.error("Помилка при отриманні продуктів за категорією:",t.message),t}}async getProductsInCategories(t,e=1,s=6){try{const r=new URLSearchParams({category:t,page:e,limit:s});return(await a.get(`${this.BASE_URL}/products?${r}`)).data}catch(r){throw console.error("Помилка при отриманні продуктів за категорією(при оновленні сторінки): ",r.message),r}}async getProductById(t){try{return(await a.get(`${this.BASE_URL}/products/${t}`)).data}catch(e){throw console.error("Помилка при отриманні продукта за айді:",e.message),e}}async createNewOrder(t){try{return(await a.post(`${this.BASE_URL}/orders`,t)).data}catch(e){throw console.error("Помилка при створенні нового замовлення:",e.message),e}}async createSubscription(t){return await a.post(this.BASE_URL+"/subscription",t,{headers:{"Content-Type":"application/json"}})}}var n,u;class h{constructor(t){p(this,n);this.storageBasketName=t,this.initStorage()}initStorage(){this.getAllProducts()||i(this,n,u).call(this,[])}getAllProducts(){return JSON.parse(localStorage.getItem(this.storageBasketName))}addProduct(t){if(!t)return;const e=this.getAllProducts(),s=e.find(r=>r._id===t._id);s?s.amount+=1:(t.amount=1,e.push(t)),i(this,n,u).call(this,e)}removeProductById(t){const e=this.getAllProducts(),s=e.find(r=>r._id===t);if(s)s.amount>1?s.amount-=1:e.filter(r=>r._id===s._id);else return;i(this,n,u).call(this,e)}removeAllProductsById(t){i(this,n,u).call(this,this.getAllProducts().filter(e=>e._id!==t))}removeAllProducts(){i(this,n,u).call(this,[])}removeProduct(t){const s=this.getAllProducts().filter(r=>r._id!==t);i(this,n,u).call(this,s)}}n=new WeakSet,u=function(t){localStorage.setItem(this.storageBasketName,JSON.stringify(t))};const B="/project-CodeCrafters/assets/symbol-defs-e77d3d30.svg",m="productsBasket",l=new h(m);function f(){return l.getAllProducts()}function w(o){l.addProduct(o)}function L(o){l.removeAllProductsById(o)}const y=()=>{const o=document.querySelector("#cart-counter-header"),t=f();o.textContent=`(${t.length})`};y();export{A,h as S,w as a,f as g,B as i,L as r,y as u};
//# sourceMappingURL=header-0a0c9e98.js.map
