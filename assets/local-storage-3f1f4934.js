var p=(a,r,e)=>{if(!r.has(a))throw TypeError("Cannot "+e)};var l=(a,r,e)=>{if(r.has(a))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(a):r.set(a,e)};var i=(a,r,e)=>(p(a,r,"access private method"),e);import{a as c}from"./vendor-c5b37fd0.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=e(t);fetch(t.href,o)}})();class m{constructor(){this.BASE_URL="https://food-boutique.b.goit.study/api"}async getProductsByName(r,e,s=1,t=6){const o=new URLSearchParams({keyword:r,category:e,page:s,limit:t});try{return(await c.get(`${this.BASE_URL}/products?${o}`)).data}catch{throw console.error("Помилка при отриманні продуктів:",error.message),error}}async getAllProducts(r=1,e=6){try{return(await c.get(`${this.BASE_URL}/products`,{params:{page:r,limit:e}})).data}catch(s){throw console.error("Помилка при отриманні всіх продуктів:",s.message),s}}async getPopularProducts(r){try{const e={limit:r};return(await c.get(`${this.BASE_URL}/products/popular`,{params:e})).data}catch(e){throw console.error("Помилка при отриманні популярних продуктів:",e.message),e}}async getDiscountedProducts(){try{return(await c.get(`${this.BASE_URL}/products/discount`)).data}catch(r){throw console.error("Помилка при отриманні продуктів зі знижкою:",r.message),r}}async getProductsByCategory(){try{return(await c.get(`${this.BASE_URL}/products/categories`)).data}catch(r){throw console.error("Помилка при отриманні продуктів за категорією:",r.message),r}}async getProductsInCategories(r,e=1,s=6){try{const t=new URLSearchParams({category:r,page:e,limit:s});return(await c.get(`${this.BASE_URL}/products?${t}`)).data}catch(t){throw console.error("Помилка при отриманні продуктів за категорією(при оновленні сторінки): ",t.message),t}}async getProductById(r){try{return(await c.get(`${this.BASE_URL}/products/${r}`)).data}catch(e){throw console.error("Помилка при отриманні продукта за айді:",e.message),e}}async createNewOrder(r){try{return(await c.post(`${this.BASE_URL}/orders`,r)).data}catch(e){throw console.error("Помилка при створенні нового замовлення:",e.message),e}}async createSubscription(r){try{return(await c.post(`${this.BASE_URL}/subscriptions`,{email:r})).data}catch(e){if(e.response&&e.response.status===409)return{conflict:!0};throw console.error("Error during subscription:",e.message),e}}}var n,u;class f{constructor(r){l(this,n);this.storageBasketName=r,this.initStorage()}initStorage(){this.getAllProducts()||i(this,n,u).call(this,[])}getAllProducts(){return JSON.parse(localStorage.getItem(this.storageBasketName))}addProduct(r){if(!r)return;const e=this.getAllProducts(),s=e.find(t=>t._id===r._id);s?s.amount+=1:(r.amount=1,e.push(r)),i(this,n,u).call(this,e)}removeProductById(r){const e=this.getAllProducts(),s=e.find(t=>t._id===r);if(s)s.amount>1?s.amount-=1:e.filter(t=>t._id===s._id);else return;i(this,n,u).call(this,e)}removeAllProductsById(r){i(this,n,u).call(this,this.getAllProducts().filter(e=>e._id!==r))}removeAllProducts(){i(this,n,u).call(this,[])}removeProduct(r){const s=this.getAllProducts().filter(t=>t._id!==r);i(this,n,u).call(this,s)}}n=new WeakSet,u=function(r){localStorage.setItem(this.storageBasketName,JSON.stringify(r))};export{m as A,f as S};
//# sourceMappingURL=local-storage-3f1f4934.js.map
