{"version":3,"file":"commonHelpers2.js","sources":["../src/js/modal.js"],"sourcesContent":["import ApiServiceShop from './requests';\nimport icons from '../img/symbol-defs.svg';// імпортую свг собі в проект\n// import { ShopStorage } from './local-storage';\n\n\n\nconst modal = document.querySelector('.modal-prod-wrapper');\n\n// const SHOP_STORAGE = 'shop-storage';\n// const shopStorage = new ShopStorage(SHOP_STORAGE)  тут будет сторедж;\nconst api = new ApiServiceShop();\n\n\nexport async function openModal(Id) {\n  // console.log(Id);\n  try {\n    modal.classList.add('modal-active');\n    modal.classList.add('js-loader');// тут создам cпинер через css\n    const productDetails = await api.getProductById(Id);\n    modal.classList.remove('js-loader');// тут ,буду очищать cпинер через css\n    renderModal(productDetails);\n    // isCurrentCart(productDetails);\n  } catch (error) {\n  } finally {\n  }\n}\n\n//! Функція яка зберігає стан кнопки залежно від стану корзини\n\n\n\n//! Функція рендеру розмітки\nasync function renderModal(productDetails) {\n  try {\n    modal.classList.add('modal-active');\n    document.body.classList.add('stop-scroll');\n\n    modal.innerHTML = `\n  <div class=\"modal-prod-card\">\n  <button type=\"button\" class=\"modal-prod-close-btn\">\n    <svg class=\"modal-prod-close-icon\" width=\"22\" height=\"22\">\n      <use href=\"${icons}#icon-close\"></use>\n    </svg>\n  </button>\n  <div class=\"modal-prod-information-wrap\">\n  <div class=\"modal-prod-img-wrap\">\n      <img class=\"modal-prod-img\" src=\"${productDetails.img}\" alt=\"${productDetails.name}\" />\n  </div>\n  <div class=\"modal-prod-name-wrap\">\n  <p class=\"modal-prod-name\">${productDetails.name}</p>\n  <ul class=\"modal-prod-list\">\n    <li class=\"modal-prod-item\">\n      <p class=\"modal-prod-text\">Category: <span>${productDetails.category}</span></p>\n    </li>\n    <li class=\"modal-prod-item\">\n      <p class=\"modal-prod-text\">Size: <span>${productDetails.size}</span></p>\n    </li>\n    <li class=\"modal-prod-item\">\n      <p class=\"modal-prod-text\">Popularity: <span>${productDetails.popularity}</span></p>\n    </li>\n  </ul>\n  <p class=\"modal-prod-desc\">${productDetails.desc}</p>\n  </div>\n  </div>\n  <div class=\"modal-prod-price-elem\">\n  <p class=\"modal-prod-price\">&#36;${productDetails.price}</p>\n  <button class=\"modal-prod-add-btn\">\n      <p class=\"modal-prod-add-text\">Add to</p>\n      <svg class=\"modal-prod-basket-icon\" >\n        <use href=\"${icons}#icon-basket\"></use>\n      </svg>\n  </button>\n  </div>\n  </div>\n  `;\n\n    const addBtn = document.querySelector('.modal-prod-add-btn');\n    addBtn.addEventListener('click', () => addToCart(productDetails));\n\n    const closeBtn = document.querySelector('.modal-prod-close-btn');\n    closeBtn.addEventListener('click', () => closeModal());\n\n    // Додаю слухачі подій\n    window.addEventListener('click', closeModalOnWindowClick);\n    window.addEventListener('keydown', closeModalOnEsc);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// //! Функція додавання в корзину и зміни стану кнопки\n\n\n//! Функція закриття модалки при кліку на хрестик\n\nfunction closeModal() {\n  document.body.classList.remove('stop-scroll');\n  modal.classList.remove('modal-active');\n  modal.innerHTML = '';\n\n  // Видаляю слухачі подій\n  window.removeEventListener('click', closeModalOnWindowClick);\n  window.removeEventListener('keydown', closeModalOnEsc);\n}\n\n//! Закриття модалки при кліку по бекдропу\n\nfunction closeModalOnWindowClick(e) {\n  if (e.target === modal) {\n    closeModal();\n  }\n}\n\n//! Закриття модалки при кліку на кнопку ESC\n\nfunction closeModalOnEsc(e) {\n  if (e.keyCode === 27) {\n    closeModal();\n  }\n}\n\n\n\n\n// ________________________откриваю модалку _____________________________\n\n// const listEl = document.querySelector('.products');\n// listEl.addEventListener('click', onClickCart);\n//\n//  function onClickCart(e) {\n//   e.preventDefault();\n//   const clickedElement = e.target;\n//   if (\n//     clickedElement.closest('a') &&\n//     clickedElement.closest('.products-card-link')\n//   ) {\n//     const id = clickedElement.closest('li').dataset.id;\n//     openModal(id);\n//   } else {\n//     return;\n//   }\n// }\n\n\n\n// _________________________________________________________\n\n"],"names":[],"mappings":"0uBAMc,SAAS,cAAc,qBAAqB"}